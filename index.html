<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aaron's Portfolio</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #121212;
            color: #e0e0e0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow-x: hidden;
        }
        .container {
            max-width: 800px;
            width: 100%;
            padding: 20px;
            background-color: #1e1e1e;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
            border-radius: 15px;
            text-align: center;
            margin: 20px;
        }
        h1, h2 {
            margin-bottom: 15px;
            color: #ffffff;
            transition: color 0.3s ease;
            position: relative;
            opacity: 0;
            animation: fadeInUp 1s forwards;
        }
        h1:hover, h2:hover {
            color: #bdbdbd;
        }
        .avatar-container {
            position: relative;
            width: 120px;
            height: 120px;
            margin: 0 auto 10px;
            overflow: hidden;
            border-radius: 50%;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
            transition: transform 0.6s ease, box-shadow 0.6s ease;
            opacity: 0;
            animation: fadeInUp 1s forwards;
        }
        .avatar-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.6s ease;
        }
        .avatar-container:hover img {
            transform: scale(1.1) rotate(10deg);
        }
        #logo {
            width: 60px;
            height: auto;
            margin-bottom: 10px;
            transition: transform 0.6s ease;
        }
        #logo:hover {
            transform: scale(1.2);
        }
        #albumArt {
            width: 120px;
            margin-top: 15px;
        }
        #songTitle {
            font-size: 1.2rem;
            margin-top: 10px;
            color: #ffffff;
        }
        .toggle-button {
            margin-top: 15px;
            padding: 10px 20px;
            background-color: #333;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .toggle-button:hover {
            background-color: #444;
        }
        @keyframes fadeInUp {
            0% {
                opacity: 0;
                transform: translateY(20px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Aaron's Portfolio</h1>

        <!-- Logo positioned above Profile Picture -->
        <img id="logo" src="https://i.postimg.cc/90xC30g5/LEGO-logo-svg.png" alt="Lego Logo">

        <div class="avatar-container">
            <img id="profilePicture" src="https://i.ibb.co/SsGZF4Z/Aaron-Minifig.png" alt="Profile Picture">
        </div>

        <!-- Album Art and Song Title -->
        <img id="albumArt" src="https://i.ibb.co/DkHZXG6/icon.jpg" alt="Album Art">
        <p id="songTitle">Song: I'm a Winner</p>

        <!-- Background Music -->
        <audio autoplay loop>
            <source src="https://fortnite.gg/img/items/14694/audio.mp3" type="audio/mp3">
            Your browser does not support the audio element.
        </audio>

        <!-- Toggle Button for Profile Picture -->
        <button class="toggle-button" onclick="toggleProfilePicture()">Switch Profile Picture</button>

        <!-- Discord Presence Section -->
        <div class="presence-container" id="presenceContainer">
            <h2 id="discordActivityTitle">Current Discord Activity</h2>
            <div id="discordActivity">
                <img id="discordActivityImage" src="" alt="">
                <p id="discordActivityName">Loading activity...</p>
                <p id="discordActivityDetails"></p>
            </div>
        </div>

        <!-- Random Fact Section -->
        <div id="randomFact">
            <h2>Random Fact of the Day</h2>
            <p id="factText">Loading...</p>
        </div>

        <!-- Social Icons -->
        <div class="social-icons">
            <a href="https://github.com/santabo" target="_blank"><i class="fab fa-github"></i></a>
        </div>
    </div>

    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
    <script>
        const customProfilePic = "https://i.ibb.co/SsGZF4Z/Aaron-Minifig.png";
        const legoLogo = "https://i.postimg.cc/90xC30g5/LEGO-logo-svg.png";
        const overwatchLogo = "https://i.ibb.co/ZxNcF9B/ezgif-4-15af7686f5.png";
        let overwatchProfilePic = "";
        let usingCustomPic = true;

        const fetchRandomFact = async () => {
            try {
                const response = await fetch('https://uselessfacts.jsph.pl/api/v2/facts/today');
                if (!response.ok) {
                    throw new Error('Failed to fetch random fact');
                }
                const data = await response.json();
                const factText = data.text || 'No fact available today.';
                document.getElementById('factText').innerText = factText;
            } catch (error) {
                console.error('Error fetching random fact:', error);
                document.getElementById('factText').innerText = 'Unable to load fact.';
            }
        };
        fetchRandomFact();

        async function fetchOverwatchProfilePic() {
            try {
                const response = await fetch('https://overfast-api.tekrop.fr/players/Aarontendo-2585/summary');
                const data = await response.json();
                overwatchProfilePic = data.avatar;
            } catch (error) {
                console.error('Error fetching Overwatch profile picture:', error);
            }
        }
        fetchOverwatchProfilePic();

        async function fetchDiscordPresence() {
            try {
                const response = await fetch('https://api.lanyard.rest/v1/users/789872551731527690');
                const data = await response.json();

                if (data.success) {
                    const activity = data.data.activities[0];

                    if (activity) {
                        const activityName = activity.name || 'No activity detected';
                        const activityDetails = activity.details || '';

                        document.getElementById('discordActivityName').textContent = activityName;
                        document.getElementById('discordActivityDetails').textContent = activityDetails;

                        if (activity.assets && activity.assets.large_image) {
                            let imageUrl = '';

                            // Check if the image ID is in the old format
                            if (activity.assets.large_image.startsWith('mp:external/')) {
                                const parts = activity.assets.large_image.split('/https/');
                                if (parts.length === 2) {
                                    imageUrl = `https://${parts[1]}`;
                                } else {
                                    imageUrl = 'https://cdn.discordapp.com/app-assets/your_application_id/placeholder.png'; // Fallback URL
                                }
                            } else {
                                // Use the new format
                                const applicationId = activity.application_id;
                                const imageId = activity.assets.large_image;
                                imageUrl = `https://cdn.discordapp.com/app-assets/${applicationId}/${imageId}.png`;
                            }

                            document.getElementById('discordActivityImage').src = imageUrl;
                            document.getElementById('discordActivityImage').alt = activityName;
                        } else {
                            document.getElementById('discordActivityImage').src = "";
                            document.getElementById('discordActivityImage').alt = "No image available";
                        }
                    } else {
                        document.getElementById('discordActivityName').textContent = "No activity detected.";
                        document.getElementById('discordActivityDetails').textContent = "";
                        document.getElementById('discordActivityImage').src = "";
                        document.getElementById('discordActivityImage').alt = "No image available";
                    }
                }
            } catch (error) {
                console.error('Error fetching Discord presence:', error);
            }
        }
        fetchDiscordPresence();

        function toggleProfilePicture() {
            const profilePicElement = document.getElementById('profilePicture');
            if (usingCustomPic) {
                profilePicElement.src = overwatchProfilePic || legoLogo;
            } else {
                profilePicElement.src = customProfilePic;
            }
            usingCustomPic = !usingCustomPic;
        }
    </script>
</body>
</html>
